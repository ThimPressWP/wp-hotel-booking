!function(e){var t=e(document);function o(e){return e=new Date(e),!isNaN(e.getTime())}function a(t){e(t).find(".datepicker").datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,minDate:0,maxDate:"+365D",onSelect:function(o){var a=e(this),n=a.datepicker("getDate"),i=new Date(n).getTime()/1e3-60*new Date(n).getTimezoneOffset(),r=a.attr("name"),s=!1;o=e(this).datepicker("getDate");if(r.indexOf("date-start")>0)s=r.replace("date-start","date-start-timestamp"),e(".datepicker.end_date").datepicker("option","minDate",o-1);else if(r.indexOf("date-end")>0){var l=e(".datepicker.start_date");s=r.replace("date-end","date-end-timestamp");l.datepicker("option","maxDate",o+1)}s&&e(t).find('input[name="'+s+'"]').val(i)}})}e(document).on("click","._hb_room_faq_meta_box__add",(function(t){t.preventDefault();const o=e(".faq_append").html();return e(this).closest("._hb_room_faq_meta_box__content").find("._hb_room_faq_meta_box__fields").append(o),!1})),e(document).on("click","._hb_room_faq_meta_box__fields a.delete",(function(){return e(this).closest("._hb_room_faq_meta_box__field").remove(),!1})),null==Date.prototype.compareWith&&(Date.prototype.compareWith=function(e){"string"==typeof e&&(e=new Date(e));var t=parseInt(this.getTime()/1e3),o=parseInt(e.getTime()/1e3);return t>o?1:t<o?-1:0}),t.ready((function(){e(".wp-admin.post-type-hb_booking .search-box #post-search-input").attr("placeholder",hotel_booking_i18n.search_booking);let n=1;t.on("click",".hb-pricing-controls a",(function(t){var o=e(this),i=o.closest(".hb-pricing-table"),r=o.data("action");switch(t.preventDefault(),n++,r){case"clone":var s=!1;e(".hb-pricing-table").length<1&&(s=!0);var l=e(wp.template("hb-pricing-table")({clone:s})),c=l.find(".hb-pricing-price");l.hide().css("background-color","#00A0D2").css("transition","background-color 0.5s"),a(l),i.find(".hb-pricing-price").each((function(e){c.eq(e).val(this.value)})),i.hasClass("regular-price")?(l.removeClass("regular-price"),e(".hb-pricing-table-title > span",l).html("Date Range"),e("#hb-pricing-plan-list").append(l),l.find('input[type="text"], input[type="number"], input[type="hidden"]').each((function(){var t=e(this),o=t.attr("name");o=o.replace(/__INDEX__/,n-1e3),t.attr("name",o),t.attr("name").indexOf("plan_id")>0&&t.attr("value",n-1e3)}))):l.insertAfter(i),l.fadeTo(350,.8).delay(1e3).fadeTo(250,1,(function(){e(this).css("background-color",""),e(".dashicons-edit",this).trigger("click")})),e("#hb-no-plan-message").hide();break;case"edit":o.hasClass("dashicons-edit")?(e("input",i).removeAttr("readonly"),e("input",i).datepicker("enable"),o.removeClass("dashicons-edit").addClass("dashicons-yes"),e(".hb-pricing-table .dashicons-yes").not(o).trigger("click")):(e("input",i).attr("readonly","readonly"),e("input",i).datepicker("disable"),o.removeClass("dashicons-yes").addClass("dashicons-edit"));break;case"remove":confirm(hotel_booking_i18n.confirm_remove_pricing_table)&&(0==i.siblings(".hb-pricing-table").length&&e("#hb-no-plan-message").show(),i.remove())}return!1})),e("#tp_hotel_booking_pricing #hb-room-select").change((function(){var e=window.location.href;e=e.replace(/[&]?hb-room=[0-9]+/,""),0!=this.value&&(e+="&hb-room="+this.value),window.location.href=e})),e('form[name="pricing-table-form"]').submit((function(){var t=!0;return e(".hb-pricing-table").each((function(a){var n=e(this),i=n.find('input[name^="date-start"]'),r=n.find('input[name^="date-end"]');if(!n.hasClass("regular-price")&&(o(i.datepicker("getDate"))?o(r.datepicker("getDate"))||(alert(hotel_booking_i18n.empty_pricing_plan_start_date),r.focus(),t=!1):(alert(hotel_booking_i18n.empty_pricing_plan_start_date),i.focus(),t=!1),!t))return!1;n.find('input[type="text"], input[type="number"], input[type="hidden"]').each((function(){var t=e(this),o=t.attr("name");o=o.replace(/__INDEX__/,a-1e3),t.attr("name",o)}))})),t})),e(".hb-pricing-table").each((function(){a(this)}));var i=new Date,r=[];r.push(i.getYear()+"-"+i.getMonth()),function(){for(var t=e(".hotel-booking-fullcalendar"),o=0;o<t.length;o++){var a=e(t[o]),n=a.attr("data-events");void 0===n&&(n=[]),a.fullCalendar({header:{left:"",right:""},ignoreTimezone:!1,handleWindowResize:!0,editable:!1,defaultView:"singleRowMonth",events:function(e,t,o,a){a(JSON.parse(n))}})}}(),e(document).on("click",".hotel-booking-fullcalendar-toolbar .fc-button",(function(t){t.preventDefault();var o=e(this),a=e(".hotel-booking-fullcalendar"),n=o.attr("data-room"),i=o.attr("data-month");return e.ajax({url:ajaxurl,type:"POST",data:{action:"hotel_booking_load_other_full_calendar",nonce:hotel_settings.nonce,room_id:n,date:i},beforeSend:function(){o.append('<i class="fa fa-spinner fa-spin"></i>')}}).done((function(t){if(o.find(".fa").remove(),!0===t.status){var n=JSON.parse(t.events);try{var i=new Date(n[0].start),s=i.getYear()+"-"+i.getMonth();if(-1==r.indexOf(s)){r.push(s);for(var l=0;l<n.length;l++){var c=n[l];a.fullCalendar("renderEvent",c,!0)}}}catch(e){console.debug(e)}e(".hotel-booking-fullcalendar").fullCalendar("refetchEvents"),o.hasClass("fc-next-button")?a.fullCalendar("next"):a.fullCalendar("prev"),e(".hotel-booking-fullcalendar-month").text(t.month_name),e(".hotel-booking-fullcalendar-toolbar .fc-next-button").attr("data-month",t.next),e(".hotel-booking-fullcalendar-toolbar .fc-prev-button").attr("data-month",t.prev)}})).fail((function(){o.find(".fa").remove()})),!1})),e(".datetime-picker-metabox").datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,minDate:0,maxDate:"+365D",numberOfMonths:2,onSelect:function(t){var o=e(this).attr("name"),a=jQuery(this).datepicker("getDate"),n=new Date(a).getTime()/1e3-60*(new Date).getTimezoneOffset();a&&a.setDate(a.getDate()+1),e('input[name="'+o+'_timestamp"]').val(n)}}),e("#datepickerImage").click((function(){e("#txtFromDate").datepicker("show")})),e("#hb-booking-date-from").datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,onSelect:function(){var t=e(this),o=t.datepicker("getDate"),a=new Date(o).getTime()/1e3-60*(new Date).getTimezoneOffset();t.parent().find('input[name="date-from-timestamp"]').val(a),e("#hb-booking-date-to").datepicker("option","minDate",o)}}),e("#hb-booking-date-to").datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,onSelect:function(){var t=e(this),o=t.datepicker("getDate"),a=new Date(o).getTime()/1e3-60*(new Date).getTimezoneOffset();t.parent().find('input[name="date-to-timestamp"]').val(a),e("#hb-booking-date-from").datepicker("option","maxDate",o)}}),e("form#posts-filter").submit((function(){var t=0;if(e('#hb-booking-date-from, #hb-booking-date-to, select[name="filter-type"]').each((function(){e(this).val()&&t++})),t>0&&t<3)return alert(hotel_booking_i18n.filter_error),!1})),e("#gallery_settings").on("click",".attachment.add-new",(function(t){t.preventDefault();var o=wp.media.frames.file_frame=wp.media({multiple:!0}),a=e(this);o.on("select",(function(){for(var e=o.state().get("selection").toJSON(),t="",n=0;n<e.length;n++){var i=e[n];i.url.replace(hotel_settings.upload_base_url,"");t+='<li class="attachment">',t+='<div class="attachment-preview">',t+='<div class="thumbnail">',t+='<div class="centered">',t+='<img src="'+i.url+'"/>',t+='<input type="hidden" name="_hb_gallery[]" value="'+i.id+'" />',t+="</div>",t+="</div>",t+="</div>",t+='<a class="dashicons dashicons-trash" title="Remove this image"></a>',t+="</li>"}a.before(t)})),o.open()})).on("click",".attachment .dashicons-trash",(function(t){t.preventDefault(),e(this).parent().remove()})),e("#hb-booking-details select").select2(),e(".form-field .hb-form-field-input select").select2({width:"auto"});const s=e('#deposit_room select[name="_hb_deposit_type"]');if(null===s)return;const l=e('#deposit_room input[name="_hb_deposit_amount"]');if(null===l)return;"percent"==s.find("option:selected").val()?l.attr("max","100"):l.attr("max","10000000000"),s.on("change",(function(t){"percent"==e(this).find("option:selected").val()?l.attr("max","100"):l.attr("max","10000000000")}));const c=e('#coupon_settings select[name="_hb_coupon_discount_type"]');if(null===c)return;const d=e('#coupon_settings input[name="_hb_coupon_discount_value"]');if(null===d)return;"percent_cart"==s.find("option:selected").val()?d.attr("max","100"):d.attr("max","10000000000"),c.on("change",(function(t){"percent_cart"==e(this).find("option:selected").val()?d.attr("max","100"):d.attr("max","10000000000")})),e('input[name="tp_hotel_booking_email_new_booking_enable"]').on("change _change",(function(){var t=e(this).closest("tr").siblings("."+e(this).attr("name"));this.checked?t.show():t.hide()})).trigger("change"),e("#gallery_settings ul").sortable(),e(".tp_hotel_booking_tabs_settings li a:first").addClass("active"),e(".tp_hotel_booking_setting_fields:first").addClass("active"),e(document).on("click",".tp_hotel_booking_tabs_settings li a",(function(t){t.preventDefault();var o=e(this),a=o.attr("href"),n=e(a);void 0!==a&&(e(".tp_hotel_booking_setting_fields").removeClass("active"),e(".tp_hotel_booking_tabs_settings li a").removeClass("active"),o.addClass("active"),1===n.length&&n.addClass("active"))})),e(document).on("click",".hb-dismiss-notice button",(function(t){e(this).closest(".hb-dismiss-notice").length&&(t.preventDefault(),e.ajax({url:ajaxurl,type:"POST",data:{action:"hotel_booking_dismiss_notice",nonce:hotel_settings.nonce}}))})),e(document).on("click","#wphb-theme-override-templates .template-filter",(function(t){var o=e(this),a=o.data("template"),n=o.data("filter");if(o.hasClass("current"))return!1;o.addClass("current").siblings("a").removeClass("current");var i=e("#wphb-theme-override-templates"),r=i.find("tr[data-template]");return a?r.map((function(){e(this).toggleClass("hide-if-js",e(this).data("template")!==a)})):n?r.map((function(){e(this).toggleClass("hide-if-js","yes"!==e(this).data("filter-"+n))})):r.removeClass("hide-if-js"),e(".no-templates").toggleClass("hide-if-js",!!i.find("tr.template-row:not(.hide-if-js):first").length),!1}))})),Hotel_Booking_Order={init:function(){var t=e(document),o=this;o.select2(),t.on("click",".section h4 .edit",o.edit_customer),t.on("change","#booking-item-checkall",o.toggle_checkbox),t.on("click","#add_room_item",o.add_room_item).on("click","#add_coupon",o.add_coupon).on("click","#remove_coupon",o.remove_coupon).on("click","#action_sync",o.action_sync).on("click","#booking_items .actions .edit",o.edit_room).on("click","#booking_items .actions .remove",o.remove_room).on("change",'.hb_modal .booking-room-item .section select[name="qty"]',o.update_item).on("change keyup",".hb_modal .booking-room-item .hb-room-item-field",o.update_item).on("hb_modal_open",this.openCallback).on("hb_check_available_action",this.check_available).on("hb_before_update_action",this.save_action)},update_item:function(t){e(".form_footer button.hb_form_submit").removeAttr("disabled")},edit_customer:function(t){t.preventDefault();var o=e(this),a=o.parents(".section:first"),n=a.find(".details"),i=a.find(".edit_details");i.hasClass("active")||(o.hide(),n.hide(),i.addClass("active"))},toggle_checkbox:function(t){t.preventDefault();var o=e(this),a=e('#booking_items input[name*="book_item"]');o.is(":checked")?a.attr("checked",!0):a.attr("checked",!1)},select2:function(){e("#booking_details_section #_hb_user_id").select2({placeholder:hotel_booking_i18n.select_user,minimumInputLength:3,ajax:{url:ajaxurl,dataType:"json",type:"POST",quietMillis:50,data:function(e){return{user_name:e.term,action:"hotel_booking_load_order_user",nonce:hotel_settings.nonce}},processResults:function(t){return{results:e.map(t,(function(e){return{text:e.user_login+"(#"+e.ID+" "+e.user_email+")",id:e.ID}}))}},cache:!0}})},add_room_item:function(t){t.preventDefault();var o=e(this).attr("data-order-id");return e(this).hb_modal_box({tmpl:"hb-add-room",settings:{order_id:o}}),!1},add_coupon:function(t,o,a){t.preventDefault();var n=e(this).attr("data-order-id");return e(this).hb_modal_box({tmpl:"hb-coupons",settings:{order_id:n}}),!1},remove_coupon:function(t,o,a){t.preventDefault();var n=e(this),i=n.attr("data-order-id"),r=n.attr("data-coupon-id");return e(this).hb_modal_box({tmpl:"hb-confirm",settings:{order_id:i,coupon_id:r,action:"hotel_booking_remove_coupon_on_order"}}),!1},action_sync:function(t){t.preventDefault();var o=e(this),a=(e("#hb-booking-items").find(".hb_overlay"),e('input[name*="book_item"]:checked')),n={};if(_do_process=!1,a.length>0){_do_process=!0;for(var i=0;i<a.length;i++)n[i]=e(a[i]).val()}return _do_process&&o.hb_modal_box({tmpl:"hb-confirm",settings:{order_id:o.attr("data-order-id"),order_item_id:n,action:"hotel_booking_admin_remove_order_items"}}),!1},edit_room:function(t){t.preventDefault(),t.stopPropagation();var o=e(this),a=o.attr("data-order-id"),n=o.attr("data-order-item-id"),i=o.attr("data-order-item-type"),r=(o.attr("data-order-item-parent"),o.find(".fa"));return e.ajax({url:ajaxurl,type:"POST",data:{order_id:a,order_item_id:n,order_item_type:i,action:"hotel_booking_load_order_item",nonce:hotel_settings.nonce},beforeSend:function(){r.addClass("fa-spin")}}).done((function(e){r.removeClass("fa-spin"),o.hb_modal_box({tmpl:"hb-add-room",settings:e})})),!1},remove_room:function(t){t.preventDefault();var o=e(this);return o.hb_modal_box({tmpl:"hb-confirm",settings:{order_id:o.attr("data-order-id"),order_item_id:o.attr("data-order-item-id"),action:"hotel_booking_admin_remove_order_item"}}),!1},openCallback:function(t,o,a){if(t.preventDefault(),"hb-add-room"===o){var n=a.find(".check_in_date"),i=a.find(".check_out_date");a.find(".booking_search_room_items").select2({placeholder:hotel_booking_i18n.select_room,minimumInputLength:3,ajax:{url:ajaxurl,dataType:"json",type:"POST",quietMillis:50,data:function(e){return{room:e.term,action:"hotel_booking_load_room_ajax",nonce:hotel_settings.nonce}},processResults:function(t){return{results:e.map(t,(function(e){return{text:e.post_title,id:e.ID}}))}},cache:!0}}),n.datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,onSelect:function(){var t=e(this),o=t.datepicker("getDate"),a=new Date(o).getTime()/1e3-60*(new Date).getTimezoneOffset();t.parent().find('input[name="check_in_date_timestamp"]').val(a),i.datepicker("option","minDate",o)}}),i.datepicker({dateFormat:hotel_booking_i18n.date_time_format,monthNames:hotel_booking_i18n.monthNames,monthNamesShort:hotel_booking_i18n.monthNamesShort,dayNames:hotel_booking_i18n.dayNames,dayNamesShort:hotel_booking_i18n.dayNamesShort,dayNamesMin:hotel_booking_i18n.dayNamesMin,onSelect:function(){var t=e(this),o=t.datepicker("getDate"),a=new Date(o).getTime()/1e3-60*(new Date).getTimezoneOffset();t.parent().find('input[name="check_out_date_timestamp"]').val(a),n.datepicker("option","maxDate",o)}})}else if("hb-coupons"===o){a.find(".booking_coupon_code").select2({placeholder:hotel_booking_i18n.select_coupon,minimumInputLength:3,ajax:{url:ajaxurl,dataType:"json",type:"POST",quietMillis:50,data:function(e){return{coupon:e.term,action:"hotel_booking_load_coupon_ajax",nonce:hotel_settings.nonce}},processResults:function(t){return{results:e.map(t,(function(e){return{text:e.post_title,id:e.ID}}))}},cache:!0}})}},check_available:function(t,o,a){t.preventDefault(),t.stopPropagation();e(this);var n=e(".form_footer .check_available");a.push({name:"action",value:"hotel_booking_check_room_available"}),e.ajax({url:ajaxurl,type:"POST",data:a,beforeSend:function(){n.append('<i class="fa fa-spinner fa-spin"></i>'),e('select[name="qty"]').remove()}}).done((function(t){n.find(".fa").remove(),void 0!==t.status&&(!1!==t.status||void 0===t.message?e("#hb_modal_dialog .section:last-child").append(wp.template("hb-qty")(t)):alert(t.message))}))},save_action:function(t,o,a){var n=e("#hb-booking-items").find(".hb_overlay");e.ajax({url:ajaxurl,type:"POST",data:a,beforeSend:function(){n.addClass("active")}}).done((function(t){n.removeClass("active"),void 0!==t.status&&(!0===t.status?e("#hb-booking-items").html(t.html):void 0!==t.message&&alert(t.message))}))}},e(document).ready((function(){Hotel_Booking_Order.init()}))}(jQuery),function(e,t,o){e.fn.hb_modal_box=function(t){(t=e.extend({},{tmpl:"",settings:{}},t)).tmpl&&new a.view(t.tmpl,t.settings)};var a={view:function(o,a){return new(t.View.extend({id:"hb_modal_dialog",options:a,target:o,events:{"click .hb_modal_close":"close","click .hb_modal_overlay":"close","click .hb_form_submit":"submit","click .check_available":"check_available"},initialize:function(e){this.render()},render:function(){var t=wp.template(this.target);t=t(this.options),e("body").append(this.$el.html(t));var o=e(".hb_modal"),a=o.outerWidth(),n=o.outerHeight();e(window).width(),e(window).height(),e("#wpadminbar").innerWidth();o.css({"margin-top":"-"+n/2+"px","margin-left":"-"+a/2+"px"}),e(document).trigger("hb_modal_open",[this.target,o.find("form")])},submit:function(){return e(document).trigger("hb_before_update_action",[this.target,this.form_data()]),this.close(),e(document).trigger("hb_before_updated_action",[this.target,this.form_data()]),!1},close:function(){return e(document).trigger("hb_before_close_action",[this.target,this.form_data()]),this.$el.remove(),!1},check_available:function(t){return e(document).trigger("hb_check_available_action",[this.target,this.form_data()]),!1},form_data:function(){return _form=e(this.$el).find("form:first-child").serializeArray()}}))(a)}}}(jQuery,Backbone,_),jQuery(document).ready((function(e){e("._hb_room_faq_meta_box__fields").sortable({items:"._hb_room_faq_meta_box__field",cursor:"grab",axis:"y",handle:".sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65})})),jQuery(document).ready((function(e){const t=()=>{[...document.querySelectorAll("._hb_room_fac_panel")].map(((e,t)=>{[...e.querySelectorAll("._hb_fac_attr_panel")].map((e=>{const o=e.querySelector("._hb_fac_attr_label input"),a=e.querySelector('.hb-form-field-image .hb-image-control input[type="hidden"]');o.name=o.name.replace(/(\d+)/,(function(e,o){return Number(t)})),a.name=a.name.replace(/(\d+)/,(function(e,o){return Number(t)}))}))}))},o=()=>{e("._hb_room_fac_panel").sortable({items:"._hb_fac_attr_panel",cursor:"grab",axis:"y",handle:"._hb_fac_attr_panel_title",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,stop:function(e,o){t()}})};(()=>{const a=document.querySelector("#room_facilities");if(!a)return;const n=a.querySelector("._hb_room_fac_meta_box__add"),i=a.querySelector(".fac_append"),r=i.innerHTML;i.remove(),o(),n.addEventListener("click",(function(e){e.preventDefault(),n.insertAdjacentHTML("beforebegin",r),t(),o()})),document.addEventListener("click",(function(o){const a=o.target,n=a.closest("._hb_room_fac_panel_remove");if(n){return n.closest("._hb_room_fac_panel").remove(),void t()}const i=a.closest("._hb_room_fac_panel_title");if(i){e(a).closest("._hb_room_fac_panel").find("._hb_room_fac_panel_content").slideToggle();const t=i.querySelector(".dashicons-arrow-down-alt2");if(t)t.classList.remove("dashicons-arrow-down-alt2"),t.classList.add("dashicons-arrow-up-alt2");else{const e=i.querySelector(".dashicons-arrow-up-alt2");e.classList.remove("dashicons-arrow-up-alt2"),e.classList.add("dashicons-arrow-down-alt2")}}else;})),e("._hb_room_fac_panel_inner").sortable({items:"._hb_room_fac_panel",cursor:"grab",axis:"y",handle:"._hb_room_fac_panel_title",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,stop:function(e,o){t()}}),document.addEventListener("input",(function(e){const t=e.target;if("_hb_room_fac_label[]"===t.name){t.closest("._hb_room_fac_panel").querySelector("._hb_room_fac_panel_title_text").innerHTML=t.value}}))})(),(()=>{const a=document.querySelector("#room_facilities");if(!a)return;const n=a.querySelector(".fac_attr_append"),i=n.innerHTML;n.remove(),document.addEventListener("click",(function(e){const a=e.target;a.classList.contains("_hb_fac_attr_meta_box__add")&&(e.preventDefault(),a.insertAdjacentHTML("beforebegin",i),t(),o())})),document.addEventListener("click",(function(o){const a=o.target,n=a.closest("._hb_fac_panel_remove");if(n){return n.closest("._hb_fac_attr_panel").remove(),void t()}const i=a.closest("._hb_fac_attr_panel_title");if(i){e(a).closest("._hb_fac_attr_panel").find("._hb_fac_attr_panel_content").slideToggle();const t=i.querySelector(".dashicons-arrow-down-alt2");if(t)t.classList.remove("dashicons-arrow-down-alt2"),t.classList.add("dashicons-arrow-up-alt2");else{const e=i.querySelector(".dashicons-arrow-up-alt2");e.classList.remove("dashicons-arrow-up-alt2"),e.classList.add("dashicons-arrow-down-alt2")}}else;})),document.addEventListener("input",(function(e){const t=e.target;if("_hb_room_fac_attr_label[]"===t.name){t.closest("._hb_fac_attr_panel").querySelector("._hb_fac_attr_panel_title_text").innerHTML=t.value}}))})(),(()=>{const{__:e}=wp.i18n;document.addEventListener("click",(function(t){const o=t.target;if(!o.classList.contains("hb-image-add"))return;t.preventDefault();const a=o.closest(".hb-image-info"),n=wp.media({title:e("Select Images","wp-hotel-booking"),button:{text:e("Use this image","wp-hotel-booking")},multiple:!1,library:{type:"image"}});n.on("select",(function(){const e=n.state().get("selection").first().toJSON();a.querySelector("input[type=text]").value=e.url,a.querySelector("input[type=hidden]").value=e.id,a.querySelector(".hb-image-preview img").style.display="block",a.querySelector(".hb-image-preview img").src=e.url})),n.on("open",(function(){const e=n.state().get("selection"),t=a.querySelector("input[type=hidden]").value,o=wp.media.attachment(t);o.fetch(),e.add(o?[o]:[])})),n.open()})),document.addEventListener("click",(function(e){const t=e.target;if(!t.classList.contains("hb-image-remove"))return;e.preventDefault();const o=t.closest(".hb-form-field-image");o.querySelector("input[type=text]").value="",o.querySelector("input[type=hidden]").value="",o.querySelector(".hb-image-preview img").style.display="none"}))})()}));
